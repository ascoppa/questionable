
=# answer.inspect

= form_tag questionable.answers_create_multiple_path, method: :post, class: 'questions-form' do
  - assignments.each do |a|
    .question-block{:id => a.question.title.to_url}
      - q = a.question

      .question= q.title
      - if q.note
        .note= q.note

      - selected_answers = a.answers_for_user(current_user)
      - selected_option_ids = selected_answers.map(&:option_id)
      - field = "answers[#{a.id}][]"

      - if q.accepts_multiple_answers?
        - if q.input_type == 'checkboxes'
          - q.options.each do |opt|
            = label_tag nil, class: 'checkbox' do
              = opt.title
              = check_box_tag field, opt.id, selected_option_ids.include?(opt.id)
        - elsif q.input_type == 'multiselect'
          = select_tag field,
            options_from_collection_for_select(q.options, 'id', 'title', selected_option_ids), multiple: true

      - else
        - if q.input_type == 'select' 
          = select_tag "answers[#{a.id}][]", 
            options_from_collection_for_select(q.options, 'id', 'title', selected_option_ids.first)
        - elsif q.input_type == 'radio' 
          - q.options.each do |opt|
            = label_tag nil, class: 'radio' do
              = opt.title
              %input{type: :radio, name: field, value: opt.id, checked: selected_option_ids.first == opt.id}
              =# radio_button_tag "answers[#{a.id}][]", opt.id, selected_option_ids.first
        - elsif q.input_type == 'string'
          = text_field_tag field, selected_answers.first.message

  .form-actions
    = submit_tag 'Save Preferences', class: 'btn'

%hr
%h2 Mockup Below
%hr
